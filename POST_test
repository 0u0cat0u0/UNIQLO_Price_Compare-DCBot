import requests
import json

# URL
url = "https://d.uniqlo.com/tw/p/search/products/by-description"
product_ID = "469871"

# Headers
headers = {
    "accept": "application/json",
    "accept-language": "zh-TW,zh;q=0.9",
    "content-type": "application/json; charset=utf-8",
    "langcode": "zh_TW",
    "priority": "u=1, i",
    "sec-ch-ua": "\"Microsoft Edge\";v=\"131\", \"Chromium\";v=\"131\", \"Not_A Brand\";v=\"24\"",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "\"Windows\"",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "same-site",
}

# Referrer
referrer = "https://www.uniqlo.com/"

# Body data
body_data = {
    "url": "/tw/zh_TW/search.html?description=469871",
    "pageInfo": {
        "page": 1,
        "pageSize": 24
    },
    "belongTo": "pc",
    "rank": "overall",
    "priceRange": {"low": 0, "high": 0},
    "color": [],
    "size": [],
    "identity": [],
    "exist": [],
    "searchFlag": True,
    "description": product_ID,
    "stockFilter": "warehouse"
}

# Send POST request
response = requests.post(url, headers=headers, json=body_data, referrer=referrer)

# Check if request was successful
if response.status_code == 200:
    # Parse the JSON response
    data = response.json()
    print(json.dumps(data, indent=2))  # Pretty-print the response
else:
    print(f"Request failed with status code: {response.status_code}")
